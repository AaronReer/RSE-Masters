{%- for semester in semesters %}
# {{ semester.title }}

{{ semester.description }}

{%- for module in semester.modules %}

## {{ module.category }} ({{ module.ects }} ECTS, {{ module.sws }} SWS)

| Type       | Description                                            | SWS | ECTS | Competences |
|------------|--------------------------------------------------------|-----|------|------|
{%- for entry in module.entries %}
{%- set type = entry.keys() | list | first -%}
{%- set description = entry.values() | list | first -%}
{%- set comps = [] -%}
{%- for c in entry.competences -%}
  {%- set _ = comps.append("@" ~ c ~ " " ) -%}
{%- endfor %}
| {{ type }} | {{ description }} | {{ entry.sws }} | {{ entry.ects }} | {{ comps | join('<br>') }} |
{%- endfor %}

{%- endfor %}

{%- endfor %}

# Competences {{ "{" }}#sec-competences{{ "}" }}


| ID  | Description | Disciplines | Prerequisites | Evidence | Author | Source |
|-----|-------------|-------------|---------------|----------|--------| --------|
{%- for c in competences %}
| {{- c.id -}} | {{ c.description }} | {{ c.disciplines }} | {{ c.prerequisites }} | {{ c.evidence }} | {{ c.author }} | [ {{ c.source }} ]( {{ c.source }} )  |
{%- endfor %}

TODO: add all the generated modules here

# Module Descriptions

::: {.content-visible when-format="html"}

## Linked Modules (HTML View)

{%- for module in modules %}
- [{{ module.name | replace("_", " ") | title }}]({{ module.file }})
{%- endfor %}

:::

::: {.content-visible when-format="pdf"}

## Inlined Modules (PDF View)

{%- for module in modules %}
### {{ module.name | replace("_", " ") | title }}

{{ module.content }}

{%- endfor %}

:::


